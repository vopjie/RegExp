# RegExp
###### Javascript 正则表达式学习笔记

## 第 0 章 基本概念
###### 什么是正则表达式：正则表达式是一种特殊的字符串模式，用于匹配一组字符串。

### 0.1 定义 RegExp
``` javascript
var patt = new RegExp('hi');
```

可以向 RegExp 对象添加第二个参数，以设定检索
``` javascript
var patt = new RegExp('hi', 'g');
```

### 0.2 RegExp 对象的方法
``` javascript
test() , exec() , compile()
```

#### test() 方法检索字符串中的指定值。返回值是 true 或 false。
``` javascript
varar patt = new RegExp('free');
return patt.test('The best things in life are free'); // => true
```

#### exec() 方法检索字符串中的指定值。返回值是被找到的值。如果没有发现匹配，则返回 null。
``` javascript
varar patt = new RegExp('free');
return patt.test('The best things in life are free'); // => free
```

在使用 "g" 参数时，exec() 的工作原理如下：
找到第一个 "e"，并存储其位置
如果再次运行 exec()，则从存储的位置开始检索，并找到下一个 "e"，并存储其位置
``` javascript
var patt = new RegExp('e', 'g');
do
{
  result = patt1.exec('The best things in life are free');
  document.write(result);
}
while (result != null)
// => eeeeeenull
```

#### compile() 方法用于改变 RegExp。
#### compile() 既可以改变检索模式，也可以添加或删除第二个参数。
``` javascript
var patt = new RegExp('free');

document.write(patt.test('The best things in life are free'));
// => true
patt.compile('money');
document.write(patt1.test('The best things in life are free'));
// => false
```

## 第 1 章 简单的模式匹配
###### • 字符串字面值 • 数字 • 字母 • 任意字符

### 1.1 匹配字符串字面值
 匹配Ship(首字母要大写)：/Ship/g
### 2.2 匹配数字
\d
[0-9]
[0123456789]
### 2.3 匹配非数字字符
\D
[^0-9]
[^\d]
### 2.4 匹配单词
\w
[_a-zA-Z0-9]
注：\D 与 \w 的区别是 \D会匹配空格、标点符号(引号、连字符、反斜杠、方括号)等字符，而 \w 却不会。
### 匹配单词非单词字符
\W
[^_a-zA-Z0-9]


### 2.5 匹配空白符
\s
[ \t\n\r]
它会匹配:
• 空格
• 制表符(\t)
• 换行符(\n)
• 回车符(\r)
### 匹配非空白字符
\S
[^ \t\n\r]
[^\s]


### 2.6 再谈匹配任意字符
用正则表达式匹配任意字符的一种方法就是使用点号(U+002E)
.
........
.{8}
## 第3章 边界
• 行或者字符串的起始与结束位置;
• 单词边界(两种);
• 主题词的起始与结束位置;
• 引用字符串字面值的边界。
### 3.1 行的起始与结束
要匹配行或字符串的起始要使用脱字符(U+005E):
^
要匹配行或字符串的结尾位置要使用美元符:
$

### 匹配单词边界
就像 ^ 和 $一样，\b 是个零宽度断言，表面上它会匹配空格或者是行起始，而实际上它匹配的是个零宽度的不存在的东西。
\bthe\b

### 匹配非单词边界
非单词边界匹配除单词边界之外的位置，比如单词或者字符串中的字母或数字。
\Be\B

## 第4章 选择、分组和后向引用
• 在两种或更多可选模式中选择一个;
• 创建子模式;
• 捕获一个分组以便之后进行后向引用;
• 对组合的模式使用某项操作(如量词);
• 使用非捕获分组;
• 原子分组(高级)。

### 4.1 选择操作
(the|The|THE)



### 4.2 子模式
(t|T)h(e|eir)
第二个子模式 (e|eir) 依赖于第一个子模式 (tT)
括号对于子模式不是必需的
\b[tT]h[eir]\b

### 4.3 捕获分组和后向引用
\1

### 4.4 非捕获分组
非捕获分组不会将其内容存储在内存中。

/(?:the|The|THE)/g
/(?:the)/ig


## 第五章 字符组

匹配 10~19 的偶数
\b[1][24680]\b

匹配 0~99 的偶数
\b[24680]\b|\b[1-9][24680]\b

匹配十六进制数
[a-fA-F0-9]

匹配空格和单词字符
[\w\s]
[_a-zA-Z \t\n\r]

### 5.1 字符组取反

[^aeiou]

### 5.2 并集与差集
### 匹配并集：匹配 0 到 3 之间的数字或者 6 到 9 之间的数字
[0-3[6-9]]

### 匹配差集：匹配 a 到 z 之间的字符，但其中 m 到 r 之间的字符除外
[a-z&&[^m-r]]


## 第6章 匹配 Unicode 和其他字符

匹配长破折号(—)
\u2014

匹配短破折号(-)
\u2013

### 6.2 用八进制数匹配字符
\351等同于：\u00e9

### 6.3 匹配Unicode字符属性


### 6.4 匹配控制字符

## 第7章 量词

### 7.1 贪心、懒惰和占有
量词自身是贪心的。贪心的量词会首先匹配整个字符串。
量词首次尝试匹配整个字符串，如果失败则回退一个字符后再次尝试。这个过程叫做回溯(backtracking)。
9*

懒惰(有时也说勉强)的量词则使用另一种策略。它从目标的起始位置开始尝试寻找匹配，每次检查字符串的一个字符，寻找它要匹配的内容。
要使一个量词成为懒惰的，必须在普通量词后添加一个问号(?)。
9？

占有量词会覆盖整个目标然后尝试寻找匹配内容，但它只尝试一次，不会回溯。
占有量词就是在普通量词之后添加一个加号(+)。
9+

### 7.3 匹配特定次数
使用花括号可以限制某个模式在某个范围内匹配的次数，未经修饰的量词就是贪心量词。
花括号(或者说范围语法)是最灵活和精确的量词

7{1} 会匹配第一次出现的 7。
7{1,} 或 7+ 匹配一个或多个数字 7。
7{0,} 或 7* 匹配一个或多个数字 7。
7{0,1} 或 7? 匹配0个或一个数字 7。
7{3,5} 匹配3个、4个以及5个 7

### 7.4 懒惰量词
懒惰的基本特性就是匹配尽可能少的字符。

eg:

5? 匹配零个或者一个5。

加一个 ? 来使量词变为懒惰的:

5?? 或 5*? 匹配零个5。
5+? 只匹配了一个 5
5{2,5}? 只匹配了两个 5

### 7.5 占有量词
占有式匹配很像贪心式匹配，它会选定尽可能多的内容。但与贪心式匹配不同的是它不进行回溯。它不会放弃所找到的内容，它很自私，这也是把它称为占有式(possessive)的原因。它紧紧“抱”住自己所选的内容一点也不放弃。但占有量词的优点是速度快，因为无需回溯。当然，匹配失败的话也很快。

## 第8章 环视
###### 环视是一种非捕获分组，它根据某个模式之前或之后的内容匹配其他模式。环视也称为零宽度断言。

环视包括:

• 正前瞻;• 反前瞻;• 正后顾;• 反后顾。

### 8.1 正前瞻
ancyent (?=marinere) 匹配后面跟 marinere 的单词 ancyent。

### 8.2 反前瞻
ancyent (?!marinere) 匹配后面不跟 marinere 的单词 ancyent。

### 8.3 正后顾
(?<=ancyent) marinere 匹配前面跟 marinere 的单词 ancyent。

### 8.4 反后顾
(?<!ancyent) marinere 匹配前面不跟 marinere 的单词 ancyent。

示例：匹配北美电话号码：
^\(?(?:\d{3})\)?[-.]?(?:\d{3})[-.]?(?:\d{4})$

* ^是判定一行或者主题词开头的零宽度断言。

* \(? 是一个字面左括号，但它是可选的(?)。

* (?:\d{3}) 是一个匹配连续三位数字的非捕获分组。

* \)? 是可选的右括号。

* [-.]? 允许有可选的连字符或者句点(点号)。

* (?:\d{3}) 是另一个匹配连续三位数字的非捕获分组。

* [-.]? 再次允许有可选的连字符或者句号(点号)。

* (?:\d{4}) 是匹配连续四位数字的非捕获分组。

* $ 匹配一行或主题词的结尾。

示例：匹配电子邮件地址
^([\w-.!#$%&'*+-/=?^_`{|}~]+)@((?:\w+\.)+)(?:[a-zA-Z]{2,4})$





















